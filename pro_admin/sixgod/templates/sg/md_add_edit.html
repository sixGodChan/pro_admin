

<form method="post" novalidate>
    {% csrf_token %}
    {% for val in ae_obj %}
        {% if val.is_popup %}
            <p>{{ val.item.field.label }}:{{ val.item }}&nbsp<a href="#" onclick="popupUrl('{{ val.popup_url }}')">添加</a>{{ val.item.errors.0 }}</p>
        {% else %}
            <p>{{ val.item.field.label }}:{{ val.item }}{{ val.item.errors.0 }}</p>
        {% endif %}
    {% endfor %}
    <input type="submit" value="提交">
</form>

<script>
    function popupUrl(url) {
        window.open(url, "win1", "status=1,height:500,width:600,toolbar=0,resizeable=0")
    }
    function popupCallback(data_dict) {
        var o = document.createElement('option');
        o.innerHTML = data_dict.option_text;
        o.setAttribute('value', data_dict.option_id);
        o.setAttribute('selected', 'selected');
        document.getElementById(data_dict.popup_tag_id).appendChild(o);
    }
</script>